<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">

<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/amuuncle32.jpg?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/amuuncle16.jpg?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="我的梦想就是努力实现小时候吹过的牛！">
<meta property="og:type" content="website">
<meta property="og:title" content="AmuUncle">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="AmuUncle">
<meta property="og:description" content="我的梦想就是努力实现小时候吹过的牛！">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AmuUncle">
<meta name="twitter:description" content="我的梦想就是努力实现小时候吹过的牛！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>AmuUncle</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?8f32f215d9497a6235932a68154fff59";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">AmuUncle</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">有时候一点点就是一大步</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/baidusitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/31/第13节-MFC之图片控件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/31/第13节-MFC之图片控件/" itemprop="url">第13节 MFC之图片控件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-31T22:37:27+08:00">
                2017-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第13节-MFC之图片控件、"><a href="#第13节-MFC之图片控件、" class="headerlink" title="第13节 MFC之图片控件、"></a>第13节 MFC之图片控件、</h1><p>这节学习两个控件：</p>
<blockquote>
<p>图片控件：  Picture Control</p>
</blockquote>
<h2 id="1-新建项目"><a href="#1-新建项目" class="headerlink" title="1. 新建项目"></a>1. 新建项目</h2><p>新建一个基于对话框项目“day15”，布局如下，自行处理：<br><img src="http://img.blog.csdn.net/20171031214935166?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>拖动一个<strong>Picture Control</strong>控件到界面，其实Picture Control就是CStatic 类；</p>
<p>设置<strong>Picture Control</strong>的如下属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>修改值</th>
<th style="text-align:right">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>IDC_STATIC_IMG</td>
<td style="text-align:right">控件ID</td>
</tr>
<tr>
<td>Type</td>
<td>Bitmap</td>
<td style="text-align:right">设置类型为bitmap位图类型</td>
</tr>
</tbody>
</table>
<p>如图：<img src="http://img.blog.csdn.net/20171031215325005?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="2-添加Bitmap-位图资源"><a href="#2-添加Bitmap-位图资源" class="headerlink" title="2.添加Bitmap 位图资源"></a>2.添加Bitmap 位图资源</h2><p>自行下载几张.bmp位图，拷贝到项目的res文件下，然后切换到资源视图，添加Bitmap 资源，如图所示：<br><img src="http://img.blog.csdn.net/20171031220313389?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171031220321254?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171031220331105?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>上传完成之后可以看到已经有三个Bitmap 位图的ID；<br><img src="http://img.blog.csdn.net/20171031220405693?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="3-显示出位图资源"><a href="#3-显示出位图资源" class="headerlink" title="3.显示出位图资源"></a>3.显示出位图资源</h2><p>单击<strong>Picture Control</strong>控件，在属性中找到Image属性，在下拉框中选择我们刚才添加的位图ID就可以成功显示图片了，如图：<br><img src="http://img.blog.csdn.net/20171031220811037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="4-动态控制显示图片"><a href="#4-动态控制显示图片" class="headerlink" title="4.动态控制显示图片"></a>4.动态控制显示图片</h2><p>在界面上添加一个按钮，我么通过按钮来切换界面图片显示：<br><img src="http://img.blog.csdn.net/20171031221205220?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>接下来我们添加<strong>Picture Control</strong>控件的变量m_image，如图:<br><img src="http://img.blog.csdn.net/20171031221246177?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>我们来编辑“切换按钮”的点击方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">void Cday15Dlg::OnBnClickedButtonChange()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	HBITMAP phBmp = (HBITMAP)LoadImage(NULL,_T(&quot;.\\res\\20171031100114614.bmp&quot;),IMAGE_BITMAP,0,0,LR_LOADFROMFILE);</div><div class="line">	m_image.SetBitmap(phBmp);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码解释：</p>
<blockquote>
<ol>
<li>获取一个位图的句柄<br>2.将其设置到<strong>Picture Control</strong>控件</li>
</ol>
</blockquote>
<p>效果图：<br><img src="http://img.blog.csdn.net/20171031222147848?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="5-配合CFileDialog-类来选择显示图片"><a href="#5-配合CFileDialog-类来选择显示图片" class="headerlink" title="5.配合CFileDialog 类来选择显示图片"></a>5.配合CFileDialog 类来选择显示图片</h2><p>我们来编辑“切换按钮”的点击方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">void Cday15Dlg::OnBnClickedButtonChange()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	CFileDialog dlg(TRUE,NULL,NULL,OFN_FILEMUSTEXIST,_T(&quot;*.bmp|*.bmp&quot;),this);</div><div class="line">	if (dlg.DoModal() == IDOK)</div><div class="line">	&#123;</div><div class="line">		HBITMAP phBmp = (HBITMAP)LoadImage(NULL,dlg.GetPathName(),IMAGE_BITMAP,0,0,LR_LOADFROMFILE);</div><div class="line">		m_image.SetBitmap(phBmp);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码解释：</p>
<blockquote>
<ol>
<li>创建一个.bmp类型的文件打开对话框</li>
<li>若点击确定按钮，则将选择的.bmp文件显示出来；</li>
</ol>
</blockquote>
<p>效果图：<br><img src="http://img.blog.csdn.net/20171031223111658?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>附<strong>Picture Control</strong>控件常见属性及方法：</p>
<h3 id="一、图片控件属性"><a href="#一、图片控件属性" class="headerlink" title="一、图片控件属性"></a>一、图片控件属性</h3><blockquote>
<p>Picture Control 属性: Type:Frame //框架 Type:Etched Horz水平蚀刻线条 Type:Etched<br>Vert垂真蚀刻线条 Type:Rectangle实心矩形 Type:Bitmap位图 Type:Icon  图标<br>Type:Enhanced Metafile 增强图元 支持wmf格式图片 Type:Owner Draw   自绘图 Color:颜色<br>    Black:黑<br>    Gray:灰色<br>    White:白色<br>    Etched:蚀刻</p>
</blockquote>
<h3 id="二、Picture-Control-控件类"><a href="#二、Picture-Control-控件类" class="headerlink" title="二、Picture Control 控件类"></a>二、Picture Control 控件类</h3><blockquote>
<p>CStatic:: SetBitmap Specifies a bitmap to be displayed in the static<br>control. GetBitmap Retrieves the handle of the bitmap previously set<br>with SetBitmap.</p>
<p>SetIcon Specifies an icon to be displayed in the static control.<br>GetIcon Retrieves the handle of the icon previously set with SetIcon.</p>
<p>SetCursor Specifies a cursor image to be displayed in the static<br>control. GetCursor Retrieves the handle of the cursor image previously<br>set with SetCursor.</p>
<p>SetEnhMetaFile Specifies an enhanced metafile to be displayed in the<br>static control. GetEnhMetaFile Retrieves the handle of the enhanced<br>metafile previously set with SetEnhMetaFile</p>
</blockquote>
<h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3><h3 id="gt-gt-gt-我的私人博客-lt-lt-lt"><a href="#gt-gt-gt-我的私人博客-lt-lt-lt" class="headerlink" title="&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;"></a><a href="http://blog.amuuncle.site/" target="_blank" rel="external">&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/30/第12节-MFC之树控件CTreeCtrl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/30/第12节-MFC之树控件CTreeCtrl/" itemprop="url">第12节 MFC之树控件CTreeCtrl</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-30T21:42:36+08:00">
                2017-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>树形控件（Tree Control）：用来显示一系列项目的层次关系，最典型的例子是显示磁盘上的文件与文件夹。如果有子项目的话，单击树形控件中的项目可以展开或者收缩其子项目。MFC提供了CTreeCtrl类进行支持。</p>
</blockquote>
<p>树控件在windows程序中使用相对也是比较多的控件，例如windows资源管理器左边的浏览视图就是个树控件视图：<br><img src="http://img.blog.csdn.net/20171030202704102?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>今天我们学习一下使用树控件，实现“添加节点”、“删除节点”、“修改节点”；</p>
<h2 id="1-新建项目"><a href="#1-新建项目" class="headerlink" title="1. 新建项目"></a>1. 新建项目</h2><p>新建一个基于对话框项目“day14”，布局如下，自行处理：<br><img src="http://img.blog.csdn.net/20171030203600767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<table>
<thead>
<tr>
<th>控件名</th>
<th style="text-align:right">控件ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tree Control</td>
<td style="text-align:right">IDC_TREE_VIEW</td>
</tr>
<tr>
<td>编辑框</td>
<td style="text-align:right">IDC_EDIT_ADD_MDY</td>
</tr>
<tr>
<td>添加节点</td>
<td style="text-align:right">IDC_BUTTON_ADD</td>
</tr>
<tr>
<td>删除节点</td>
<td style="text-align:right">IDC_BUTTON_DEL</td>
</tr>
<tr>
<td>修改节点</td>
<td style="text-align:right">IDC_BUTTON_MDY</td>
</tr>
</tbody>
</table>
<h2 id="2-设置树控件属性"><a href="#2-设置树控件属性" class="headerlink" title="2. 设置树控件属性"></a>2. 设置树控件属性</h2><p>编辑树控件如下属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>修改值</th>
<th style="text-align:right">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>Has Buttons</td>
<td>TRUE</td>
<td style="text-align:right">在父节点旁边显示+或-</td>
</tr>
<tr>
<td>Has Lines</td>
<td>TRUE</td>
<td style="text-align:right">在父节点和子节点之间划线</td>
</tr>
<tr>
<td>Line At root</td>
<td>TRUE</td>
<td style="text-align:right">在根节点上划线</td>
</tr>
</tbody>
</table>
<h2 id="3-添加树控件变量"><a href="#3-添加树控件变量" class="headerlink" title="3. 添加树控件变量"></a>3. 添加树控件变量</h2><p>给树控件添加一个变量“m_tree”，如图：<br><img src="http://img.blog.csdn.net/20171030204858144?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="4-实现添加节点按钮函数"><a href="#4-实现添加节点按钮函数" class="headerlink" title="4. 实现添加节点按钮函数"></a>4. 实现添加节点按钮函数</h2><p>双击“添加节点”按钮，编辑按钮点击方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">void Cday14Dlg::OnBnClickedButtonAdd()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	CString strText;</div><div class="line">	GetDlgItemText(IDC_EDIT_ADD_MDY,strText);</div><div class="line">	if (strText.GetLength() == 0)</div><div class="line">	&#123;</div><div class="line">		AfxMessageBox(_T(&quot;请输入节点名！&quot;));</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line">	HTREEITEM hItem = m_tree.GetSelectedItem();</div><div class="line">	if(hItem == NULL)&#123;</div><div class="line">		hItem = TVI_ROOT;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	TVINSERTSTRUCT ts =&#123;0&#125;;</div><div class="line">	ts.hParent = hItem;</div><div class="line">	ts.hInsertAfter = TVI_LAST;</div><div class="line">	ts.item.pszText = strText.GetBuffer();</div><div class="line">	ts.item.mask = TVIF_TEXT;</div><div class="line">	HTREEITEM hNewItem = m_tree.InsertItem(&amp;ts);</div><div class="line">	m_tree.SelectItem(hNewItem);</div><div class="line">	m_tree.EnsureVisible(hNewItem);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码解释：</p>
<blockquote>
<ol>
<li>先获取文本框中的值，如果值为空，则提示用户输入；</li>
<li>获取当前选中的节点，若不存在选中的节点，则获取根节点；</li>
<li>创建节点结构体，设置其父节点，插入方式，节点内容，内容可见等；</li>
<li>插入新的节点，并且设置节点保证可见；<br>效果图：<br><img src="http://img.blog.csdn.net/20171030211143052?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><h2 id="5-实现删除节点按钮函数"><a href="#5-实现删除节点按钮函数" class="headerlink" title="5. 实现删除节点按钮函数"></a>5. 实现删除节点按钮函数</h2>双击“删除节点”按钮，编辑按钮点击方法：</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">void Cday14Dlg::OnBnClickedButtonDel()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	HTREEITEM hItem = m_tree.GetSelectedItem();</div><div class="line">	if(hItem == NULL)&#123;</div><div class="line">		AfxMessageBox(_T(&quot;请选择要删除的节点！&quot;));</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	HTREEITEM hParentItem = m_tree.GetParentItem(hItem);</div><div class="line">	m_tree.DeleteItem(hItem);</div><div class="line">	m_tree.SelectItem(hParentItem);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码解释：</p>
<blockquote>
<ol>
<li>获取选中的节点，若没有选中的节点，则提示用户；</li>
<li>获取选中节点的父节点</li>
<li>删除选中的节点</li>
<li>将其父节点设置为选中节点</li>
</ol>
</blockquote>
<p>删除前：<br><img src="http://img.blog.csdn.net/20171030211100130?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>删除后：<br><img src="http://img.blog.csdn.net/20171030211117156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="6-实现修改节点按钮函数"><a href="#6-实现修改节点按钮函数" class="headerlink" title="6. 实现修改节点按钮函数"></a>6. 实现修改节点按钮函数</h2><p>双击“修改节点”按钮，编辑按钮点击方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">void Cday14Dlg::OnBnClickedButtonMdy()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	HTREEITEM hItem = m_tree.GetSelectedItem();</div><div class="line">	if(hItem == NULL)&#123;</div><div class="line">		AfxMessageBox(_T(&quot;请选择要修改的节点！&quot;));</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	CString strText;</div><div class="line">	GetDlgItemText(IDC_EDIT_ADD_MDY,strText);</div><div class="line">	if (strText.GetLength() == 0)</div><div class="line">	&#123;</div><div class="line">		AfxMessageBox(_T(&quot;请输入新的节点名！&quot;));</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line">	m_tree.SetItemText(hItem,strText);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码解释：</p>
<blockquote>
<ol>
<li>获取选中的节点，若没有选中的节点，则提示用户；</li>
<li>先获取文本框中的值，如果值为空，则提示用户输入；<br>3.修改文本名<h2 id="7-映射节点选择消息"><a href="#7-映射节点选择消息" class="headerlink" title="7. 映射节点选择消息"></a>7. 映射节点选择消息</h2>我们想实现在点击选择控件是，下方的文本框中自动出现选择节点的文本，那么就要映射节点的选择变化消息：TVN_SELCHANGE，如图添加事件处理函数：<br><img src="http://img.blog.csdn.net/20171030212609773?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>编辑事件处理函数：</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">void Cday14Dlg::OnTvnSelchangedTreeView(NMHDR *pNMHDR, LRESULT *pResult)</div><div class="line">&#123;</div><div class="line">	LPNMTREEVIEW pNMTreeView = reinterpret_cast&lt;LPNMTREEVIEW&gt;(pNMHDR);</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line"></div><div class="line">	HTREEITEM hItem = m_tree.GetSelectedItem();</div><div class="line">	if(hItem != NULL)&#123;</div><div class="line">		CString strText = m_tree.GetItemText(hItem);</div><div class="line">		SetDlgItemText(IDC_EDIT_ADD_MDY, strText);</div><div class="line">	&#125;</div><div class="line">	*pResult = 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码解释：</p>
<blockquote>
<ol>
<li>获取选中的节点，若不存在，则略过，不处理；</li>
<li>获取选中的节点文本，将文本值设置到文本框中；</li>
</ol>
</blockquote>
<p>效果图：<br><img src="http://img.blog.csdn.net/20171030213448114?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>至此，MFC树控件的简单使用已经结束，其实树控件还有很多属性，比如添加图标，这就到以后的实践中再来学习，附树控件常见属性及方法：</p>
<h3 id="1、树形控件的属性"><a href="#1、树形控件的属性" class="headerlink" title="1、树形控件的属性"></a>1、树形控件的属性</h3><blockquote>
<p>TVS_EDITLABELS:允许用户进行节点文本的编辑 TVS_HASBUTTONS:节点左侧添加一个按钮<br>TVS_HASLINES:父节点与子结点出现连线 TVS_LINESATROOT:子节点与根节点之间出现连线<br>TVS_NOTOOLTIPS:结点无动态提示 TVS_SINGLEEXPAND:节点的选中(未选中)t7展开(合拢)同步<br>MFC中以两种形式封装树形控件，一种是树形控件CTreeCtrl，另一种是树形视图控件CTreeView。对于一般的要求，比如在对话框中，使用CTreeCtrl比较方便。在使用树形视图控件时，只需要利用成员函数取得其引用，就可以像树形控件一样方便的使用：<br>CTreeCtrl&amp; GetTreeCtrl( ) const;<br>调用InsertItem函数能够将节点插入树形控件中，并返回插入的项的HTREEITEM。树形控件的插入工作往往是在对话框的OnInitDialog函数中进行，而对于树形视图控件，则是在OnInitUpdate函数中进行。<br>树形控件中的节点数据可以是文本，也可以是图像。节点中使用的图像是和树形控件的图像列表相对应的。在树形控件中使用图像列表是通过使用SetImageList函数来完成。<br>树形控件能产生通告消息，如: TVN_BEGINDRAG开始拖拽 TVN_ITEMEXPANDED节点被展开或收缩<br>其消息映射使用WM_NOTIFI,如： WM_NOTIFI(TVN_BEGINDRAG,IDC_TREECTRL,OnBeginDrag);</p>
</blockquote>
<h3 id="2、树形控件TVN-BEGINRDRAG消息的响应"><a href="#2、树形控件TVN-BEGINRDRAG消息的响应" class="headerlink" title="2、树形控件TVN_BEGINRDRAG消息的响应"></a>2、树形控件TVN_BEGINRDRAG消息的响应</h3><blockquote>
<p>与树形控件有关的、常用的结构是TVITEM、TVINSERTSTRUCT 、NMTREEVIEW(NM_TREEVIEW<br>)。前两个是用于插入节点时使用，而NMTREEVIEW是与树形控件的通告消息相关的结构。<br>当用鼠标左键拖拽树形控件时，控件会发出TVN_BEGINDRAG通告消息；当用鼠标右键拖拽时，则会发出TVN_BEGINRDRAG通告消息。拖拽树形控件时需要使用到IImageList::BeginDrag函数：<br>IImageList::BeginDrag creates a temporary image list that is used for<br>dragging. In response to subsequent WM_MOUSEMOVE messages, you can<br>move the drag image by using IImageList::DragMove. To end the drag<br>operation, you can use IImageList::EndDrag.<br>通常使用CTreeCtrl::CreateDragImage函数创建一个被拖拽节点的图像并返回一个CImageList指针(注意被拖拽的数据节点必须包含图像，否则返回的CImageList指针为空)，然后利用该指针来调用CImageList::BeginDrag函数。除此之外还需要调用CImageList::DragEnter函数锁定、更新窗口，并在指定的位置显示被拖拽的图像：<br>static BOOL PASCAL DragEnter(    CWnd* pWndLock,    CPoint point  );<br>If pWndLock is NULL, this function draws the image in the display<br>context associated with the desktop window, and coordinates are<br>relative to the upper left corner of the screen.<br>注意BeginDrag函数只是在拖拽开始时创建要拖拽的图像，而DragEnter函数则显示该图像。<br>最后调用CWnd::SetCapture函数使后续所有的鼠标输入都发送到当前的CWnd对象而不管鼠标的位置（因为CImageList::DragEnter函数的第一个参数为NULL时表示在与桌面窗口相关的窗口，可以说就是当前程序的框架窗口，但不包括其他应用程序的窗口上显示被拖拽的图像。因此要使得被拖拽的图像在所有的窗口上而不仅仅是应用程序的框架窗口上显示，就需要调用CWnd::SetCapture函数。一旦调用了SetCapture函数，则在当前应用程序的非框架窗口，包括系统菜单上的鼠标按键动作均被发送到当前CWnd<br>对象，直到调用ReleaseCapture为止）。<br>然后就是在鼠标移动的消息响应函数中调用CImageList::DragMove函数移动被拖拽的图像，使之与鼠标的移动位置同步。最后是调用CImageList::DragShowNolock函数隐藏或显示拖拽的图像，但它并不是必须的，也可以不调用，因此之前已经调用过CImageList::DragEnter函数显示拖拽的图像了。当传递true值显示拖拽的图像时，DragShowNolock在这个过程中不像DragEnter函数一样锁定窗口。<br>值得注意的是，在拖拽节点过程中可以使用CTreeCtrl::HitTest函数判断鼠标滑动过程中所经过的点是否位于树形控件的某一个节点之上，如果是，则返回该树形节点的HTREEITEM。此时可以使用CTreeCtrl::SelectDropTarget函数或CTreeCtrl::SelectItem函数来高亮显示该节点。</p>
</blockquote>
<h3 id="3、树形控件的成员函数"><a href="#3、树形控件的成员函数" class="headerlink" title="3、树形控件的成员函数"></a>3、树形控件的成员函数</h3><blockquote>
<p>InsertItem函数插入一个节点，并返回新插入的节点的HTREEITEM。<br>ItemHasChildren函数根据给定的HTREEITEM判断该节点是否存在子节点。<br>GetChildItem函数根据给定的HTREEITEM获取该节点下子节点的HTREEITEM，如果没有子节点，则返回NULL。<br>GetNextSiblingItem函数根据给定的HTREEITEM获取该节点的下一个同级节点。<br>EnsureVisible函数在必要的时候滚动视图列表控件使得其至少部分可见。需要注意的是，在使用TVE_COLLAPSE调用Expand收缩树形控件后不能再调用该函数，否则收缩操作将无效。</p>
</blockquote>
<h1 id="感伤：WE输了，RNG输了，心碎了。。。"><a href="#感伤：WE输了，RNG输了，心碎了。。。" class="headerlink" title="感伤：WE输了，RNG输了，心碎了。。。"></a>感伤：WE输了，RNG输了，心碎了。。。</h1><h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3><h3 id="gt-gt-gt-我的私人博客-lt-lt-lt"><a href="#gt-gt-gt-我的私人博客-lt-lt-lt" class="headerlink" title="&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;"></a><a href="http://amuuncle.site/" target="_blank" rel="external">&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/29/第11节-MFC之列表控件CListCtrl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/29/第11节-MFC之列表控件CListCtrl/" itemprop="url">第11节 MFC之列表控件CListCtrl</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-29T21:14:48+08:00">
                2017-10-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Windows编程基础–第11节-MFC之列表控件CListCtrl"><a href="#Windows编程基础–第11节-MFC之列表控件CListCtrl" class="headerlink" title="Windows编程基础–第11节 MFC之列表控件CListCtrl"></a>Windows编程基础–第11节 MFC之列表控件CListCtrl</h1><p>在MFC程序中列表控件也是使用很频繁的控件，例如windows的资源管理器就可以用列表控件来实现，如下图：<br><img src="http://img.blog.csdn.net/20171029194504658?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>列表控件具有以下四种视图：</p>
<blockquote>
<ol>
<li>大图标</li>
<li>小图标</li>
<li>列表</li>
<li>详细信息<h2 id="1-新建项目"><a href="#1-新建项目" class="headerlink" title="1. 新建项目"></a>1. 新建项目</h2>新建一个基于对话框项目“day13”，布置界面如下，从左侧“工具箱”拖动一个List control到界面，再加上两个按钮及Combo Box，如图：<br><img src="http://img.blog.csdn.net/20171029195344235?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li>
</ol>
</blockquote>
<table>
<thead>
<tr>
<th>控件名</th>
<th style="text-align:right">控件ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>List control</td>
<td style="text-align:right">IDC_LIST_VIEW</td>
</tr>
<tr>
<td>Combo Box</td>
<td style="text-align:right">IDC_COMBO2</td>
</tr>
<tr>
<td>添加行</td>
<td style="text-align:right">IDC_BUTTON_ADD</td>
</tr>
<tr>
<td>删除行</td>
<td style="text-align:right">IDC_BUTTON_DEL</td>
</tr>
</tbody>
</table>
<h2 id="2-添加列表控件变量"><a href="#2-添加列表控件变量" class="headerlink" title="2. 添加列表控件变量"></a>2. 添加列表控件变量</h2><p>单击选中列表控件，右击选择-&gt;“添加变量”，添加变量名为m_list,如下：<br><img src="http://img.blog.csdn.net/20171029195933714?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="3-初始化列表控件"><a href="#3-初始化列表控件" class="headerlink" title="3. 初始化列表控件"></a>3. 初始化列表控件</h2><p>切换到对话框的初始化函数（OnInitDialog()），我们来给列表控件增加三列，<br><img src="http://img.blog.csdn.net/20171029200613135?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">m_list.ModifyStyle(LVS_TYPEMASK, LVS_REPORT); //设置列表控件样式为详细信息</div><div class="line">m_list.InsertColumn(0,_T(&quot;第一列&quot;),LVCFMT_LEFT,120);</div><div class="line">m_list.InsertColumn(1,_T(&quot;第二列&quot;),LVCFMT_LEFT,120);</div><div class="line">m_list.InsertColumn(2,_T(&quot;第三列&quot;),LVCFMT_LEFT,120);</div></pre></td></tr></table></figure>
<h2 id="4-添加列表图标"><a href="#4-添加列表图标" class="headerlink" title="4. 添加列表图标"></a>4. 添加列表图标</h2><p>自行下载或者制作两个bmp图标，分别为16<em>16，和32</em>32；将图标复制到项目的res资源目录中，<img src="http://img.blog.csdn.net/20171029201802886?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>切换到资源视图，右击添加资源，导入我们准备好的图标，如图所示：<br><img src="http://img.blog.csdn.net/20171029201954651?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>导入好之后我们可以更改位图ID，如图所示：<br><img src="http://img.blog.csdn.net/20171029202051457?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>接下来我们在day13.h的头文件中添加两个成员变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CImageList m_ilLarge;</div><div class="line">CImageList m_ilSmall;</div></pre></td></tr></table></figure>
<p>分别来对应32<em>32，和16</em>16；<br>然后我们再切换到初始化函数中，添加如下四行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">m_ilLarge.Create(IDB_BITMAP_32, 32, 1,RGB(255,0,255));</div><div class="line">m_ilSmall.Create(IDB_BITMAP_16, 16, 1,RGB(255,0,255));</div><div class="line"></div><div class="line">m_list.SetImageList(&amp;m_ilLarge,LVSIL_NORMAL);</div><div class="line">m_list.SetImageList(&amp;m_ilSmall,LVSIL_SMALL);</div></pre></td></tr></table></figure>
<h2 id="5-实现添加行按钮函数"><a href="#5-实现添加行按钮函数" class="headerlink" title="5. 实现添加行按钮函数"></a>5. 实现添加行按钮函数</h2><p>双击“添加行”按钮，编辑按钮点击方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">void Cday13Dlg::OnBnClickedButtonAdd()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	int nCount = m_list.GetItemCount();</div><div class="line">	CString strText;</div><div class="line">	strText.Format(_T(&quot;第%d行，第一列&quot;), nCount + 1);</div><div class="line">	m_list.InsertItem(nCount,strText,0);</div><div class="line">	strText.Format(_T(&quot;第%d行，第二列&quot;), nCount + 1);</div><div class="line">	m_list.SetItemText(nCount,1,strText);</div><div class="line">	strText.Format(_T(&quot;第%d行，第三列&quot;), nCount + 1);</div><div class="line">	m_list.SetItemText(nCount,2,strText);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意，只有添加第一行第一个元素是才是InsertItem，之后的添加都应该是SetItemText，防止出错；</p>
<h2 id="5-实现删除行按钮函数"><a href="#5-实现删除行按钮函数" class="headerlink" title="5. 实现删除行按钮函数"></a>5. 实现删除行按钮函数</h2><p>双击“删除行”按钮，编辑按钮点击方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">void Cday13Dlg::OnBnClickedButtonDel()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	int nCount = m_list.GetItemCount();</div><div class="line">	for (int i = nCount; i&gt;=0 ; --i)</div><div class="line">	&#123;</div><div class="line">		if (m_list.GetItemState(i,LVIS_SELECTED) == LVIS_SELECTED)</div><div class="line">		&#123;</div><div class="line">			m_list.DeleteItem(i);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样就实现了删除行的按钮，并且所有被选中的行都会被删除，按住Ctrl选中多行，点击删除，所有被选中的行都会被删除；</p>
<h2 id="6-实现列表控件的样式切换"><a href="#6-实现列表控件的样式切换" class="headerlink" title="6. 实现列表控件的样式切换"></a>6. 实现列表控件的样式切换</h2><p>切换到资源视图，单击Combo Box，打开属性-&gt;data;输入：</p>
<blockquote>
<p>大图标;小图标;详细信息;列表;</p>
</blockquote>
<p>如图：<br><img src="http://img.blog.csdn.net/20171029205119435?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>继续编辑Combo Box的属性，选择“控件事件”，添加CBN_Selchange事件，如图：<br><img src="http://img.blog.csdn.net/20171029205441857?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>编辑Combo Box的OnCbnSelchangeCombo2处理函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">void Cday13Dlg::OnCbnSelchangeCombo2()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	DWORD dwStyle;</div><div class="line">	CComboBox *pView;</div><div class="line">	pView = (CComboBox *)GetDlgItem(IDC_COMBO2);</div><div class="line">	switch(pView-&gt;GetCurSel())</div><div class="line">	&#123;</div><div class="line">	case 0:</div><div class="line">		dwStyle = LVS_ICON;</div><div class="line">		break;</div><div class="line">	case 1:</div><div class="line">		dwStyle = LVS_SMALLICON;</div><div class="line">		break;</div><div class="line">	case 2:</div><div class="line">		dwStyle = LVS_LIST;</div><div class="line">		break;</div><div class="line">	case 3:</div><div class="line">		dwStyle = LVS_REPORT;</div><div class="line">		break;</div><div class="line">	default:</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line">	m_list.ModifyStyle(LVS_TYPEMASK,dwStyle);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>很明显，先用GetDlgItem获取Combo Box的对象，然后判断Combo Box的选中的是哪一项，记录选中项的列表类型，最后设置列表属性；</p>
<h2 id="最后效果图："><a href="#最后效果图：" class="headerlink" title="最后效果图："></a>最后效果图：</h2><p>大图标:<br><img src="http://img.blog.csdn.net/20171029210611657?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>小图标：<br><img src="http://img.blog.csdn.net/20171029210644041?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>列表：<br><img src="http://img.blog.csdn.net/20171029210701658?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>详细信息：<br><img src="http://img.blog.csdn.net/20171029210716406?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3><h3 id="gt-gt-gt-我的私人博客-lt-lt-lt"><a href="#gt-gt-gt-我的私人博客-lt-lt-lt" class="headerlink" title="&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;"></a><a href="http://blog.amuuncle.site/" target="_blank" rel="external">&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/29/工具使用-第2节-HEXO-GitHub-搭建个人博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/29/工具使用-第2节-HEXO-GitHub-搭建个人博客/" itemprop="url">工具使用--第2节 HEXO+GitHub 搭建个人博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-29T14:10:26+08:00">
                2017-10-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GitHub/" itemprop="url" rel="index">
                    <span itemprop="name">GitHub</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天突然想搭建一个自己的私人博客，但是又不想为此买一台服务器，所以百度了一下，发现可以利用<strong>HEXO+码云 </strong>搭建私人博客，所以就写篇教程，记录一下吧。</p>
<h1 id="1、环境安装配置"><a href="#1、环境安装配置" class="headerlink" title="1、环境安装配置"></a>1、环境安装配置</h1><h2 id="1-1-安装node"><a href="#1-1-安装node" class="headerlink" title="1.1 安装node"></a>1.1 安装node</h2><p>下载地址：<a href="https://nodejs.org/en/download/" target="_blank" rel="external">https://nodejs.org/en/download/</a><br>默认安装就好。</p>
<h2 id="1-2-安装git"><a href="#1-2-安装git" class="headerlink" title="1.2 安装git"></a>1.2 安装git</h2><p>msysgit是Windows版的Git，从<a href="https://git-for-windows.github.io下载（百度一下也有很多下载链接），然后按默认选项安装即可。msysgit的操作命令和Linux基本一致，很多命令是通用的，例如ls，mv，rm等；" target="_blank" rel="external">https://git-for-windows.github.io下载（百度一下也有很多下载链接），然后按默认选项安装即可。msysgit的操作命令和Linux基本一致，很多命令是通用的，例如ls，mv，rm等；</a><br>mygit安装完成后，在开始菜单里找到“Git”-&gt;“Git Bash”，蹦出一个类似命令行窗口的东西，就说明Git安装成功！（详情可参见 <a href="http://blog.csdn.net/qq_25549309/article/details/78336107" target="_blank" rel="external"> 第1节</a>  ）</p>
<h2 id="1-3-申请GitHub账号"><a href="#1-3-申请GitHub账号" class="headerlink" title="1.3 申请GitHub账号"></a>1.3 申请GitHub账号</h2><p> 打开<a href="https://github.com/，自行申请账号；" target="_blank" rel="external">https://github.com/，自行申请账号；</a><br><img src="http://img.blog.csdn.net/20171029125209685?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="1-4-安装HEXO"><a href="#1-4-安装HEXO" class="headerlink" title="1.4 安装HEXO　"></a>1.4 安装HEXO　</h2><p>切换到命令行工具，CMD输入命令安装：</p>
<blockquote>
<p>npm install -g hexo</p>
</blockquote>
<p>等待安装完成；不过国内NPM镜像速度极慢，可以安装淘宝的cnpm；</p>
<blockquote>
<p>npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="external">https://registry.npm.taobao.org</a></p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20171027223208790?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>然后使用cnpm来下载HEXO，如下：</p>
<blockquote>
<p>cnpm install -g hexo</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20171027223329242?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="1-5-配置HEXO"><a href="#1-5-配置HEXO" class="headerlink" title="1.5 配置HEXO　"></a>1.5 配置HEXO　</h2><p>切换CMD到你希望创建博客项目的目录，然后输入hexo init来初始化一个项目，如：</p>
<blockquote>
<p>cd c:/workspase/blog<br>hexo init</p>
</blockquote>
<p>继续输入命令：</p>
<blockquote>
<p>hexo generate 或者 hexo g</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20171027224238089?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>生成静态页面</p>
<h2 id="1-6-启动本地服务"><a href="#1-6-启动本地服务" class="headerlink" title="1.6 启动本地服务"></a>1.6 启动本地服务</h2><blockquote>
<p>hexo server</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20171027224320127?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>可以看到提示Hexo已经运行在<a href="http://localhost:4000/上，我们用浏览器打开" target="_blank" rel="external">http://localhost:4000/上，我们用浏览器打开</a> <a href="http://localhost:4000/看看效果：" target="_blank" rel="external">http://localhost:4000/看看效果：</a><br><img src="http://img.blog.csdn.net/20171027224449843?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>神奇的博客界面就出现了；</p>
<h1 id="2、配合Github搭建个人博客"><a href="#2、配合Github搭建个人博客" class="headerlink" title="2、配合Github搭建个人博客"></a>2、配合Github搭建个人博客</h1><h2 id="2-1-登录Github创建一个项目"><a href="#2-1-登录Github创建一个项目" class="headerlink" title="2.1 登录Github创建一个项目"></a>2.1 登录Github创建一个项目</h2><ol>
<li>登录Github，点击上方的添加项目：我们来添加一个GIT版本仓，点击+号，选择“New repository”，如图：<br><img src="http://img.blog.csdn.net/20171029125325008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li>
<li>打开创建对话框之后，输入repository名，<strong>*</strong>.github.io，星号代表你的用户名，记住结尾一定要用.github.io结尾，如果你输入的格式或者用户名不匹配，最后创建的网站可能加载不出css，js等资源，具体原因还没弄清，待以后验证，暂时就按照规范来，如图：<br><img src="http://img.blog.csdn.net/20171029125935968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>其余的默认就好，点击“Create repository”来创建仓库；（我的由于已经创建同名的，所以弹出提示，请无视）</li>
<li>创建好之后进入创建好的界面，如下：<br><img src="http://img.blog.csdn.net/20171029130258224?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>由于我的已经上传过文件，所以你们是没有红框中的内容，不急，接下来我们来看怎么上传文件；</li>
<li>本地mygit还需要配置ssh秘钥，邮箱等才能和github进行上传，修改等操作；<br>这一步如果没设置过，参见<a href="http://blog.csdn.net/qq_25549309/article/details/78336107" target="_blank" rel="external">工具使用–第1节 git使用简记</a><h2 id="2-2-关联Github和HEXO"><a href="#2-2-关联Github和HEXO" class="headerlink" title="2.2 关联Github和HEXO"></a>2.2 关联Github和HEXO</h2></li>
<li>进入我们在 <strong>1.5 配置HEXO</strong> 创建的HEXO项目目录，打开根目录中的<strong>_config.yml</strong>文件（以记事本文件打开）；在文件最末尾添加如下三行：<br><img src="http://img.blog.csdn.net/20171029130914657?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>将其中的repo改为你自己repository地址，你的repository地址在github界面的这里获取，<br>如图：<br><img src="http://img.blog.csdn.net/20171029131626085?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>点击“2”处就可以直接复制地址,最后添加的三条就是：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repo: https://github.com/AmuUncle/AmuUncle.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
<p><strong>注意：</strong>每项的冒号后都要留一个英文的空格号；</p>
<ol>
<li>在HEXO项目根目录中右击选择“Git Bash Here”<br><img src="http://img.blog.csdn.net/20171029132100372?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></li>
<li>生成静态网站并同步到github<br>执行下面两个命令：</li>
</ol>
<blockquote>
<p>hexo g   // 生成<br>hexo d   // 同步<br>或者直接用：<br>hexo d -g  // 在同步前先生成网站</p>
</blockquote>
<p>中间可能会让你输入github的账号密码，输入就好：<br>运行结果如下：<br><img src="http://img.blog.csdn.net/20171029132536364?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这样网站就同步到github中了；我们可以刷新github页面。可以看到已经有很多文件了：<br><img src="http://img.blog.csdn.net/20171029132712757?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="2-3-让网站显示出来"><a href="#2-3-让网站显示出来" class="headerlink" title="2.3 让网站显示出来"></a>2.3 让网站显示出来</h2><p>我们点击github界面上的Settings按钮，进入设置界面：<br><img src="http://img.blog.csdn.net/20171029132847207?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>往下拖动，找到“github pages”选项，点击“Launch Automatic page generator”按钮，开启<strong>github pages</strong>功能；<br><img src="http://img.blog.csdn.net/20171029133016297?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这时我们就可已输入“<a href="https://AmuUncle.github.io”来打开我们创建的blog网站；" target="_blank" rel="external">https://AmuUncle.github.io”来打开我们创建的blog网站；</a><br>如下：<br><img src="http://img.blog.csdn.net/20171029133449652?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>至此，我们已经成功将网站部署到GITHUB，并且是个人独立博客哦。。。</p>
<h1 id="3、设置HEXO的主题"><a href="#3、设置HEXO的主题" class="headerlink" title="3、设置HEXO的主题"></a>3、设置HEXO的主题</h1><p>这里网上很多教程，很简单，很多人推荐NEXT主题，我也用的是这款，功能很齐全，这里我就直接给教程链接了，很详细；</p>
<blockquote>
<p>NEXT主题官网，教程非常详细：<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">http://theme-next.iissnan.com/getting-started.html</a><br>HEXO主题类列表：<a href="https://hexo.io/themes/" target="_blank" rel="external">https://hexo.io/themes/</a></p>
</blockquote>
<p>其他主题也差不多配置方法，自己研究吧。。</p>
<h1 id="4、将域名和github博客地址关联（个人需求）"><a href="#4、将域名和github博客地址关联（个人需求）" class="headerlink" title="4、将域名和github博客地址关联（个人需求）"></a>4、将域名和github博客地址关联（个人需求）</h1><p>4.1 购买域名<br>我是在阿里云购买的.site域名,很便宜，一年才几块钱，有需要的可以去看看：</p>
<blockquote>
<p><a href="https://wanwang.aliyun.com/domain/?spm=5176.8076989.763973.3.5a54fa45x7NU0Z" target="_blank" rel="external">https://wanwang.aliyun.com/domain/?spm=5176.8076989.763973.3.5a54fa45x7NU0Z</a></p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20171029134437343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>4.2 配置域名<br>进入域名解析配置界面，添加一下三项：<br><img src="http://img.blog.csdn.net/20171029134722933?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>解析列表：<br>| 方法记录类型 | 主机记录| 记录值 |<br>| ——–   |  ——–   | —–:  |<br>| CNAME     | www | AmuUncle.github.io |<br>| A       |   @   |   192.30.252.154 |<br>| A       |   @   |   192.30.252.153 |  </p>
<p>其中 192.30.252.153和 192.30.252.154 为github的IP地址；<br>域名这边已经配置好，但还没结束，我们再来到HEXO博客的目录，进入source目录，新建一个CNAME文件，没有任何后缀名，编辑内容为：<code>amuuncle.site</code><br><img src="http://img.blog.csdn.net/20171029135626125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171029135635278?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>接下来输入：</p>
<blockquote>
<p>hexo d -g</p>
</blockquote>
<p>重新生成同步网站到github，接下来就是见证奇迹的时候我们到浏览器输入我们的域名，就打开了我们的blog页面，如图（如果打不开，请等待10分钟，因为更改域名解析要十分钟后才能生效）<br><img src="http://img.blog.csdn.net/20171029140306025?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>最终效果图，完美，接下来我们就可以自由写个人微博，并且部署到github了，配置好域名之后，不注意根本发现不了你是在github上部署的网站哦。<br>使用如下命令添加一篇博客，然后进入项目的source_posts目录找打创建的md文件，编辑此文件就是在写博客；</p>
<blockquote>
<p>hexo new post “工具使用–第2节 HEXO+GitHub 搭建个人博客”</p>
</blockquote>
<p>对于md文件的编写，网上有很对教程，我使用的工具是：<strong>Haroopad</strong>，完全没费，可自行下载。<br><img src="http://img.blog.csdn.net/20171029141421963?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>记住写完之后还是要输入：</p>
<blockquote>
<p>hexo d -g</p>
</blockquote>
<p>来重新生成同步网站到github；</p>
<p>最后，我的blog地址就是<a href="http://blog.amuuncle.site/" target="_blank" rel="external">&gt;&gt;&gt;我的私人博客&lt;&lt;&lt;</a><br>欢饮大家光临指教。</p>

          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/29/python-selenium-自动化查询上海公交卡余额，并邮件通知/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/29/python-selenium-自动化查询上海公交卡余额，并邮件通知/" itemprop="url">python selenium 自动化查询上海公交卡余额，并邮件通知</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-29T00:49:43+08:00">
                2017-10-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PYTHON实战/" itemprop="url" rel="index">
                    <span itemprop="name">PYTHON实战</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="python-selenium-自动化查询上海公交卡余额，并邮件通知"><a href="#python-selenium-自动化查询上海公交卡余额，并邮件通知" class="headerlink" title="python selenium 自动化查询上海公交卡余额，并邮件通知"></a>python selenium 自动化查询上海公交卡余额，并邮件通知</h1><p>1、下载python安装。<br>　　<a href="https://www.python.org/downloads/release/python-351/" target="_blank" rel="external">https://www.python.org/downloads/release/python-351/</a><br>2、安装selenium<br>2.1、通过pip 安装<br>    pip install selenium</p>
<p>2.2、通过下载包安装 ,直接下载selenium包：<br>    <a href="https://pypi.python.org/pypi/selenium" target="_blank" rel="external">https://pypi.python.org/pypi/selenium</a><br>    解压，cmd进入目录:<br>         python setup.py install</p>
<p>3 、 安装Chrome driver<br>    下载地址：<a href="http://npm.taobao.org/mirrors/chromedriver" target="_blank" rel="external">http://npm.taobao.org/mirrors/chromedriver</a><br>    下载解压，将 chromedriver.exe 文件放到chrome的安装目录下…\Google\Chrome\Application\ ,然后设置path环境变量；<br>    <img src="http://img.blog.csdn.net/20171016220018549?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="chromedriver与chrome各版本对应表"></p>
<p>4、全部代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line">	# coding = utf-8</div><div class="line"></div><div class="line">from selenium import webdriver</div><div class="line">from time import sleep</div><div class="line">import smtplib</div><div class="line">import traceback</div><div class="line">from email.mime.text import MIMEText</div><div class="line">from email.mime.multipart import MIMEMultipart</div><div class="line">cardIDList = [u&quot;u54311******&quot;, u&quot;u728833******&quot;]</div><div class="line"></div><div class="line"></div><div class="line">def sendmail(subject,msg,toaddrs,fromaddr,smtpaddr,password):</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    @subject:邮件主题</div><div class="line">    @msg:邮件内容</div><div class="line">    @toaddrs:收信人的邮箱地址</div><div class="line">    @fromaddr:发信人的邮箱地址</div><div class="line">    @smtpaddr:smtp服务地址，可以在邮箱看，比如163邮箱为smtp.163.com</div><div class="line">    @password:发信人的邮箱密码</div><div class="line">    &apos;&apos;&apos;</div><div class="line">    mail_msg = MIMEMultipart()</div><div class="line">    mail_msg[&apos;Subject&apos;] = subject</div><div class="line">    mail_msg[&apos;From&apos;] =fromaddr</div><div class="line">    mail_msg[&apos;To&apos;] = &apos;,&apos;.join(toaddrs)</div><div class="line">    mail_msg.attach(MIMEText(msg, &apos;html&apos;, &apos;utf-8&apos;))</div><div class="line">    try:</div><div class="line">        s = smtplib.SMTP()</div><div class="line">        s.connect(smtpaddr)  #连接smtp服务器</div><div class="line">        s.login(fromaddr,password)  #登录邮箱</div><div class="line">        s.sendmail(fromaddr, toaddrs, mail_msg.as_string()) #发送邮件</div><div class="line">        s.quit()</div><div class="line">    except :</div><div class="line">       print (&quot;Error: unable to send email&quot;)</div><div class="line">       print (traceback.format_exc())</div><div class="line"></div><div class="line"></div><div class="line">def get_gj_info(cardID):</div><div class="line">    for i in range(1, 10, 1):</div><div class="line">        try:</div><div class="line">            print(&quot;第%d次尝试。。。。&quot; % i)</div><div class="line">            driver = webdriver.Chrome()</div><div class="line">            print(&quot;###########&gt;&gt;&gt;&gt;&gt;&gt;&gt;开始打开上海交通网站&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;#########&quot;)</div><div class="line">            driver.get(&apos;http://www.sptcc.com/&apos;)</div><div class="line">            print(driver.title)</div><div class="line">            print(&quot;网站打开成功&quot;)</div><div class="line">            sleep(2)</div><div class="line">            print(&quot;查询公交卡号:%s&quot; % cardID)</div><div class="line">            driver.find_element_by_id(&quot;pL1i1&quot;).send_keys(cardID)</div><div class="line">            driver.find_element_by_css_selector(&quot;a[class=\&quot;pL1b1\&quot;]&quot;).click()</div><div class="line">            sleep(2)</div><div class="line">            data = driver.find_element_by_css_selector(&quot;p[class=\&quot;amt\&quot;]&quot;).text</div><div class="line">            print(&quot;公交卡 &#123;0&#125;  &#123;1&#125; &quot;.format(cardID, data))</div><div class="line">            driver.quit()</div><div class="line">            return &quot;公交卡 &#123;0&#125;  &#123;1&#125; \n&quot;.format(cardID, data)</div><div class="line">            break</div><div class="line">        except:</div><div class="line">            print(&quot;查询出错。。。，再次尝试。。。&quot;)</div><div class="line"></div><div class="line">    print(&quot;##################&gt;&gt;&gt;&gt;&gt;&gt;&gt;退出查询&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;##############&quot;)</div><div class="line">    return &quot;查询出错。。。&quot;</div><div class="line"></div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    fromaddr = &quot;*******@163.com&quot;</div><div class="line">    smtpaddr = &quot;smtp.163.com&quot;          # 163邮件smtp服务器地址</div><div class="line">    toaddrs = [&quot;*******@qq.com&quot;, &quot;*******@163.com&quot;]</div><div class="line">    gj_info =&apos;&apos;</div><div class="line">    for cardID in cardIDList:</div><div class="line">        gj_info += get_gj_info(cardID)</div><div class="line">    subject = gj_info</div><div class="line">    password = &quot;*******&quot;</div><div class="line">    msg = gj_info</div><div class="line">    sendmail(subject,msg,toaddrs,fromaddr,smtpaddr,password)</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/28/工具使用-第1节-git使用简记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/28/工具使用-第1节-git使用简记/" itemprop="url">工具使用--第1节 git使用简记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-28T23:38:48+08:00">
                2017-10-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git教程/" itemprop="url" rel="index">
                    <span itemprop="name">git教程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="工具使用–第1节-git使用简记"><a href="#工具使用–第1节-git使用简记" class="headerlink" title="工具使用–第1节 git使用简记"></a>工具使用–第1节 git使用简记</h1><h2 id="GIT-（分布式版本控制系统）"><a href="#GIT-（分布式版本控制系统）" class="headerlink" title="GIT （分布式版本控制系统）"></a>GIT （分布式版本控制系统）</h2><blockquote>
<p>Git是一款免费、开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。  Git的读音为/gɪt/。 Git是一个开源的分布式版本控制系统，可以有效、高速的处理从很小到非常大的项目版本管理。 Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。 Torvalds 开始着手开发 Git 是为了作为一种过渡方案来替代 BitKeeper，后者之前一直是 Linux 内核开发人员在全球使用的主要源代码工具。开放源码社区中的有些人觉得BitKeeper 的许可证并不适合开放源码社区的工作，因此 Torvalds 决定着手研究许可证更为灵活的版本控制系统。尽管最初 Git 的开发是为了辅助 Linux 内核开发的过程，但是我们已经发现在很多其他自由软件项目中也使用了 Git。例如 很多 Freedesktop 的项目迁移到了Git 上。    — <strong>百度百科</strong></p>
</blockquote>
<h2 id="1-安装git"><a href="#1-安装git" class="headerlink" title="1.安装git"></a>1.安装git</h2><p>这里只说windows版本安装使用，Linux版本等以后再研究；</p>
<h3 id="1-1-下载msysgit"><a href="#1-1-下载msysgit" class="headerlink" title="1.1  下载msysgit"></a>1.1  下载msysgit</h3><p><strong>msysgit</strong>是Windows版的Git，从<a href="https://git-for-windows.github.io下载（百度一下也有很多下载链接），然后按默认选项安装即可。**msysgit**的操作命令和Linux基本一致，很多命令是通用的，例如ls，mv，rm等；" target="_blank" rel="external">https://git-for-windows.github.io下载（百度一下也有很多下载链接），然后按默认选项安装即可。**msysgit**的操作命令和Linux基本一致，很多命令是通用的，例如ls，mv，rm等；</a><br>mygit安装完成后，在开始菜单里找到“Git”-&gt;“Git Bash”，蹦出一个类似命令行窗口的东西，就说明Git安装成功！</p>
<h2 id="2-配置msysgit"><a href="#2-配置msysgit" class="headerlink" title="2. 配置msysgit"></a>2. 配置msysgit</h2><p>在桌面空白处右击，选择“Git Bash here”进入msysgit的控制台，输入一下两条命令，配置全局的用户名和邮箱：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name &quot;你的用户名&quot;</div><div class="line">$ git config --global user.email &quot;邮箱地址&quot;</div></pre></td></tr></table></figure></p>
<p>你的用户名：可以随意设置，但要记住用户名<br>邮箱地址：你的邮箱地址</p>
<h2 id="3-创建代码仓"><a href="#3-创建代码仓" class="headerlink" title="3.创建代码仓"></a>3.创建代码仓</h2><h3 id="3-1-进入你想建仓的目录"><a href="#3-1-进入你想建仓的目录" class="headerlink" title="3.1 进入你想建仓的目录"></a>3.1 进入你想建仓的目录</h3><p>在目录空白处右击选择“Git Bash here”进入msysgit的控制台，输入git init命令把这个目录变成Git可以管理的仓库：</p>
<blockquote>
<p>$ git init<br> Initialized empty Git repository in C:/Users/Administrator/Desktop/usb_encryption_5.4.0/git_demo/.git/</p>
</blockquote>
<p>git会在此目录创建.git目录，这是Git来跟踪管理版本库的，无需我们来改动，</p>
<h2 id="4-版本控制"><a href="#4-版本控制" class="headerlink" title="4.版本控制"></a>4.版本控制</h2><p>我们现在在此目录下来创建一个readme.md文件，随意填写些内容，如下<br><img src="http://img.blog.csdn.net/20171024232855549?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="4-1-查看版本状态"><a href="#4-1-查看版本状态" class="headerlink" title="4.1 查看版本状态"></a>4.1 查看版本状态</h3><blockquote>
<p>git status<br><img src="http://img.blog.csdn.net/20171024233234409?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
</blockquote>
<h3 id="4-2-添加到缓存区"><a href="#4-2-添加到缓存区" class="headerlink" title="4.2 添加到缓存区"></a>4.2 添加到缓存区</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git add readme.md</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20171024233414198?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="4-3-提交代码到版本仓"><a href="#4-3-提交代码到版本仓" class="headerlink" title="4.3 提交代码到版本仓"></a>4.3 提交代码到版本仓</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -m &quot;Add readme&quot;</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20171024233600207?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>-m 后面跟得是你提交的代码的描述，建议所有提交都应该添加描述。</p>
<p><em>暂时先记录这么多，下次再补充完整</em></p>

          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/28/第10节-MFC菜单/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/28/第10节-MFC菜单/" itemprop="url">第10节 MFC菜单</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-28T23:33:24+08:00">
                2017-10-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Windows编程基础–第10节-MFC菜单"><a href="#Windows编程基础–第10节-MFC菜单" class="headerlink" title="Windows编程基础–第10节 MFC菜单"></a>Windows编程基础–第10节 MFC菜单</h1><h1 id="MFC菜单（CMenu）"><a href="#MFC菜单（CMenu）" class="headerlink" title="MFC菜单（CMenu）"></a>MFC菜单（CMenu）</h1><p>MFC菜单分为两类：</p>
<blockquote>
<p>窗体菜单<br>快捷菜单:又叫弹出菜单，或者上下文菜单</p>
</blockquote>
<h3 id="1、创建项目"><a href="#1、创建项目" class="headerlink" title="1、创建项目"></a>1、创建项目</h3><p>打开vs2010，创建一个基于对话框的项目，项目名“day10”,注意这次主框架中就不要勾选“系统菜单”和“关于框”了，如图：<br><img src="http://img.blog.csdn.net/20171026223157074?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>创建好后，删除自动生成的文本控件，如图：<br><img src="http://img.blog.csdn.net/20171026223358413?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="2、创建系统菜单"><a href="#2、创建系统菜单" class="headerlink" title="2、创建系统菜单"></a>2、创建系统菜单</h3><p>切换到资源视图，右击我们的项目“day10”，选择添加资源，出现如下界面：<br><img src="http://img.blog.csdn.net/20171026223840662?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20171026223849482?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>选择“Menu”点击新建,然后就可以看到我们的项目中Menu目录，这里就存放菜单资源，展开后就可以看到，我们刚添加的菜单ID，双击打开；<br>我们可以直接输入想要添加的菜单选项，如图：<br><img src="http://img.blog.csdn.net/20171026225016056?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>我们可以在资源视图右击菜单ID，然后选择属性，修改ID为IDR_MENU_SYSTEM;</p>
<h3 id="3、显示系统菜单"><a href="#3、显示系统菜单" class="headerlink" title="3、显示系统菜单"></a>3、显示系统菜单</h3><p>我们打开刚才创建的主窗口，右击打开属性，在属性列表找到MENU属性，下拉框选择刚才创建的IDR_MENU_SYSTEM菜单，如图所示：<br><img src="http://img.blog.csdn.net/20171026225352426?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这时主窗口就和IDR_MENU_SYSTEM菜单关联起来了，运行看看效果：<br><img src="http://img.blog.csdn.net/20171026225644814?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="4、创建菜单消息事件"><a href="#4、创建菜单消息事件" class="headerlink" title="4、创建菜单消息事件"></a>4、创建菜单消息事件</h3><p>我们切换到我们创建的菜单界面，来实现菜单中保存选项的处理事件，在“保存”选项上右击，选择“添加事件处理函数”，如下：<br><img src="http://img.blog.csdn.net/20171026225912317?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>，出现如下添加事件界面：<br><img src="http://img.blog.csdn.net/20171026230051574?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这里我们类列表中选择Cday10Dlg中创建操作函数，函数名修改为OnMenuSaveClick，点击“添加编辑”，添加处理函数；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">void Cday10Dlg::OnMenuSaveClick()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加命令处理程序代码</div><div class="line">	AfxMessageBox(_T(&quot;文件已保存！&quot;));  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行效果，点击“文件”-&gt;“保存”,此时就会弹窗提示“””文件已保存！”，如图所示：<br><img src="http://img.blog.csdn.net/20171026230628546?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="5、创建快捷菜单"><a href="#5、创建快捷菜单" class="headerlink" title="5、创建快捷菜单"></a>5、创建快捷菜单</h3><p>切换资源视图，<br>选择“Menu”点击“插入MENU”,自动打开；我们可以直接输入想要添加的菜单选项，如图：<br><img src="http://img.blog.csdn.net/20171026231003422?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>注意：快捷菜单中最上面的“快捷菜单”不会显示，名字可以随意。<br>修改次menu的ID为IDR_MENU_QUICK；</p>
<h3 id="6、显示快捷菜单"><a href="#6、显示快捷菜单" class="headerlink" title="6、显示快捷菜单"></a>6、显示快捷菜单</h3><p>我们打开刚才创建的主窗口，右击打开属性，在属性列表上方选择“消息”<img src="http://img.blog.csdn.net/20171026234537989?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述">按钮，找到“WM_OnContextMenu”,选择add OnContextMenu方法，如图所示：<br><img src="http://img.blog.csdn.net/20171026231615024?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">void Cday10Dlg::OnContextMenu(CWnd* pWnd, CPoint point)</div><div class="line">&#123;</div><div class="line">	// TODO: 在此处添加消息处理程序代码</div><div class="line">	CMenu menu;</div><div class="line">	if(!menu.LoadMenu(IDR_MENU_QUICK))</div><div class="line">	&#123;</div><div class="line">		return;</div><div class="line">	&#125;</div><div class="line">	CMenu* pMenu = menu.GetSubMenu(0);</div><div class="line">	pMenu-&gt;TrackPopupMenu(TPM_LEFTALIGN|TPM_RIGHTBUTTON,point.x,point.y,pWnd);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这段代码的意思就是：先试图加载IDR_MENU_QUICK菜单，加载成功之后，将菜单显示在鼠标右击（TPM_RIGHTBUTTON），靠左方（TPM_LEFTALIGN）的位置；<br>运行效果：<br><img src="http://img.blog.csdn.net/20171026232302952?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>可以看见，菜单已经显示出来；</p>
<h3 id="7、创建菜单消息事件"><a href="#7、创建菜单消息事件" class="headerlink" title="7、创建菜单消息事件"></a>7、创建菜单消息事件</h3><p>同步骤4，如图：<br><img src="http://img.blog.csdn.net/20171026232540747?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>编辑OnCopy函数，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">void Cday10Dlg::OnCopy()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加命令处理程序代码</div><div class="line">		AfxMessageBox(_T(&quot;文件已复制！&quot;));  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果图：<br><img src="http://img.blog.csdn.net/20171026232658919?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/28/第9节-MFC对话框控件访问的七种方法（下）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/28/第9节-MFC对话框控件访问的七种方法（下）/" itemprop="url">第9节 MFC对话框控件访问的七种方法（下）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-28T23:33:13+08:00">
                2017-10-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Windows编程基础–第9节-MFC对话框控件访问的七种方法（下）"><a href="#Windows编程基础–第9节-MFC对话框控件访问的七种方法（下）" class="headerlink" title="Windows编程基础–第9节 MFC对话框控件访问的七种方法（下）"></a>Windows编程基础–第9节 MFC对话框控件访问的七种方法（下）</h1><p>上节学习了MFC访问控件的三种方法，这节我们来学习剩下的四种方法，四种方法分别如下：</p>
<blockquote>
<p>第四种<br>把控件和整型变量相关联</p>
<p>第五种<br>把控件和控件变量相关联</p>
<p>第六种<br> SendMessage方法</p>
<p>第七种<br>SendDlgItemMessage方法</p>
<h1 id="方法四-把控件和整型变量相关联"><a href="#方法四-把控件和整型变量相关联" class="headerlink" title="方法四 把控件和整型变量相关联"></a>方法四 把控件和整型变量相关联</h1><h2 id="1-创建项目"><a href="#1-创建项目" class="headerlink" title="1. 创建项目"></a>1. 创建项目</h2><p>打开上节用到的day08项目，切换到资源视图，添加一个按钮“方法4”，我们在此按钮上实现方法四，如图所示：<br><img src="http://img.blog.csdn.net/20171025194222125?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
</blockquote>
<h2 id="2-关联整型变量"><a href="#2-关联整型变量" class="headerlink" title="2. 关联整型变量"></a>2. 关联整型变量</h2><p>单击选择身高的输入框（IDC_EDIT_SG）,右击选择“添加变量”，打开如下界面：<br><img src="http://img.blog.csdn.net/20171025194458916?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>现在我们先选择类别为“value”，然后选择变量类型选择“int”，变量名“m_Height”，其余的默认就好，不过你也可以尝试修改一下最大值，最小值等。如图所示：<br><img src="http://img.blog.csdn.net/20171025195031283?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>现在我们切换到解决方案视图，可以看见，<strong>day08Dlg.h</strong>中已经增加了一个类变量，m_Height，<strong>day08Dlg.cpp</strong>中DoDataExchange也增加该变量的关联方法，将变量 m_Height和IDC_EDIT_SG的输入框关联起来，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::DoDataExchange(CDataExchange* pDX)</div><div class="line">&#123;</div><div class="line">	CDialogEx::DoDataExchange(pDX);</div><div class="line">	DDX_Text(pDX, IDC_EDIT_SG, m_Height);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有day08Dlg的构造函数中也对m_Height进行了初始化，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Cday08Dlg::Cday08Dlg(CWnd* pParent /*=NULL*/)</div><div class="line">	: CDialogEx(Cday08Dlg::IDD, pParent)</div><div class="line">	, m_Height(0)</div><div class="line">&#123;</div><div class="line">	m_hIcon = AfxGetApp()-&gt;LoadIcon(IDR_MAINFRAME);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们可以看到m_Height的初始化值为0，现在我们编译运行程序，可以看到身高输入框中的值就为0，如图：<br><img src="http://img.blog.csdn.net/20171025195934143?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>接下来我们分别关联IDC_EDIT_TZ和IDC_EDIT_BMI为变量int m_Weight,double m_BMI;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">int m_Height;</div><div class="line">int m_Weight;</div><div class="line">double m_BMI;</div></pre></td></tr></table></figure>
<h2 id="3-实现按钮事件"><a href="#3-实现按钮事件" class="headerlink" title="3.实现按钮事件"></a>3.实现按钮事件</h2><p>现在m_Height ，m_Weight ，m_BMI 分别和界面上的三个输入框相关联，所以我们可以直接取它们的值就可以，也可以直接进行赋值，但这是会用下面这个方法:</p>
<blockquote>
<p>UpdateData(TRUE);   //把控件的值关联到变量<br>UpdateData(FALSE);  //把变量的值关联到控件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedButtonFunc4()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	UpdateData(TRUE);   //把控件的值关联到变量</div><div class="line">	double dHeight = m_Height / 100.00;</div><div class="line">	m_BMI = m_Weight / (dHeight * dHeight );</div><div class="line">	UpdateData(FALSE);  //把变量的值关联到控件</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>编译运行，这时就可以看到点击方法4之后，BMI值就计算出来了，如图：<br><img src="http://img.blog.csdn.net/20171025201108120?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h1 id="方法五-把控件和控件变量相关联"><a href="#方法五-把控件和控件变量相关联" class="headerlink" title="方法五 把控件和控件变量相关联"></a>方法五 把控件和控件变量相关联</h1><h2 id="1-添加“方法5”按钮"><a href="#1-添加“方法5”按钮" class="headerlink" title="1. 添加“方法5”按钮"></a>1. 添加“方法5”按钮</h2><p>如图：<br><img src="http://img.blog.csdn.net/20171025201519201?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="1-关联控件变量"><a href="#1-关联控件变量" class="headerlink" title="1. 关联控件变量"></a>1. 关联控件变量</h2><p>单击选择身高的输入框（IDC_EDIT_SG）,右击选择“添加变量”，打开如下界面：<br><img src="http://img.blog.csdn.net/20171025201559731?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>现在我们先选择类别为“control”，变量名“m_edit_Height”，其余的默认就好，不过你也可以尝试修改一下最大值，最小值等。如图所示：<br><img src="http://img.blog.csdn.net/20171025211636783?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>接下来我们分别关联IDC_EDIT_TZ和IDC_EDIT_BMI为变量    CEdit m_edit_tz, CEdit m_edit_bmi;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">CEdit m_edit_sg;</div><div class="line">CEdit m_edit_tz;</div><div class="line">CEdit m_edit_bmi;</div></pre></td></tr></table></figure></p>
<h2 id="3-实现按钮事件-1"><a href="#3-实现按钮事件-1" class="headerlink" title="3.实现按钮事件"></a>3.实现按钮事件</h2><p>现在m_edit_sg，m_edit_tz，m_edit_bmi分别和界面上的三个输入框相关联，所以我们可以直接取它们的值就可以，也可以直接进行赋值，但这是会用下面这个方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedButtonFunc5()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	TCHAR tcHeight[10], tcWeight[10] , tcBMI[10];</div><div class="line">	m_edit_sg.GetWindowText(tcHeight,10);</div><div class="line">	m_edit_tz.GetWindowText(tcWeight,10);</div><div class="line"></div><div class="line">	int nHeight = _ttoi(tcHeight);</div><div class="line">	double dHeight = nHeight / 100.00;</div><div class="line">	int nWeight = _ttoi(tcWeight);</div><div class="line"></div><div class="line">	double bmi = nWeight/(dHeight * dHeight);</div><div class="line">	char buf[28];</div><div class="line">	sprintf(buf, &quot;%.3f&quot;, bmi);</div><div class="line">	m_edit_bmi.SetWindowText(buf);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="方法六-SendMessage方法"><a href="#方法六-SendMessage方法" class="headerlink" title="方法六 SendMessage方法"></a>方法六 SendMessage方法</h1><p>通过SendMessage方法发送WM_GETTEXT消息到控件所在窗口来获取控件文本值，同样发送WM_SETTEXT消息到控件所在窗口来设置控件文本值；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedButtonFunc6()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	TCHAR tcHeight[10], tcWeight[10] , tcBMI[10];</div><div class="line">	::SendMessage(GetDlgItem(IDC_EDIT_SG)-&gt;m_hWnd,WM_GETTEXT,10,(LPARAM)tcHeight);</div><div class="line">	::SendMessage(GetDlgItem(IDC_EDIT_TZ)-&gt;m_hWnd,WM_GETTEXT,10,(LPARAM)tcWeight);</div><div class="line"></div><div class="line">	int nHeight = _ttoi(tcHeight);</div><div class="line">	double dHeight = nHeight / 100.00;</div><div class="line">	int nWeight = _ttoi(tcWeight);</div><div class="line"></div><div class="line">	double bmi = nWeight/(dHeight * dHeight);</div><div class="line">	char buf[28];</div><div class="line">	sprintf(buf, &quot;%.3f&quot;, bmi);</div><div class="line">	::SendMessage(GetDlgItem(IDC_EDIT_BMI)-&gt;m_hWnd,WM_SETTEXT,10,(LPARAM)buf);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="方法七-SendDlgItemMessage方法"><a href="#方法七-SendDlgItemMessage方法" class="headerlink" title="方法七 SendDlgItemMessage方法"></a>方法七 SendDlgItemMessage方法</h1><p>通过SendDlgItemMessage方法发送WM_GETTEXT消息到控件所在窗口来获取控件文本值，同样发送WM_SETTEXT消息到控件所在窗口来设置控件文本值；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedButtonFunc7()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	TCHAR tcHeight[10], tcWeight[10] , tcBMI[10];</div><div class="line">	SendDlgItemMessage(IDC_EDIT_SG,WM_GETTEXT,10,(LPARAM)tcHeight);</div><div class="line">	SendDlgItemMessage(IDC_EDIT_TZ,WM_GETTEXT,10,(LPARAM)tcWeight);</div><div class="line"></div><div class="line">	int nHeight = _ttoi(tcHeight);</div><div class="line">	double dHeight = nHeight / 100.00;</div><div class="line">	int nWeight = _ttoi(tcWeight);</div><div class="line"></div><div class="line">	double bmi = nWeight/(dHeight * dHeight);</div><div class="line">	char buf[28];</div><div class="line">	sprintf(buf, &quot;%.3f&quot;, bmi);</div><div class="line"></div><div class="line">	SendDlgItemMessage(IDC_EDIT_BMI,WM_SETTEXT,10,(LPARAM)buf);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>总结，以上七种方法虽然结果相同，但是其内部机制是有所区别的，在我们将来的编程中要根据实际情况来选择合适的方法，最后，我们列举一下这七种方法：<br>| 方法名        | 简介   |<br>| ——–   | —–:  |<br>| GetDlgItem()     | 获取控件对象 |<br>| GetDlgItemText()        |   获取对象文本   |<br>| GetDlgItemInt()         |    获取对象整型值   |<br>| DDX_Text(pDX,IDC_EDIT_SG, m_Height);        |    把控件和整型变量相关联   |<br>| DDX_Control(pDX,IDC_EDIT_BMI,m_edit_bmi);  |    把控件和控件变量相关联    |<br>| SendMessage       |    发送WM_GETTEXT消息到控件所在窗口来获取控件文本值   |<br>| SendDlgItemMessage         |   发送WM_GETTEXT消息来获取控件文本值    | </p>
<h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/28/第8节-MFC对话框控件访问的七种方法（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/28/第8节-MFC对话框控件访问的七种方法（上）/" itemprop="url">第8节 MFC对话框控件访问的七种方法（上）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-28T23:32:43+08:00">
                2017-10-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Windows编程基础–第8节-MFC对话框控件访问的七种方法（上）"><a href="#Windows编程基础–第8节-MFC对话框控件访问的七种方法（上）" class="headerlink" title="Windows编程基础–第8节 MFC对话框控件访问的七种方法（上）"></a>Windows编程基础–第8节 MFC对话框控件访问的七种方法（上）</h1><p>MFC对话框控件具有以下三种访问方式(当然还有很多别的访问方式，今天时间紧急，先学这三种)，分别是：</p>
<blockquote>
<p>第一种<br>GetDlgItem()-&gt;GetWindowText()<br>GetDlgItem()-&gt;SetWindowText()</p>
<p>第二种<br>GetDlgItemText()</p>
<p>第三种<br>GetDlgItemInt()<br>SetDlgItemInt()</p>
</blockquote>
<h3 id="1-新建一个对话框项目"><a href="#1-新建一个对话框项目" class="headerlink" title="1.新建一个对话框项目"></a>1.新建一个对话框项目</h3><p>参见上节，我们这节采用VS2010编写一个身高体重计算器（BMI），参见 <a href="http://blog.csdn.net/qq_25549309/article/details/78277801" target="_blank" rel="external">第二节</a>；</p>
<h3 id="2-布局"><a href="#2-布局" class="headerlink" title="2.布局"></a>2.布局</h3><p>编辑布局如下：<br><img src="http://img.blog.csdn.net/20171024220008701?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<table>
<thead>
<tr>
<th>EDIT名称</th>
<th style="text-align:right">ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>身高</td>
<td style="text-align:right">IDC_EDIT_SG</td>
</tr>
<tr>
<td>体重</td>
<td style="text-align:right">IDC_EDIT_TZ</td>
</tr>
<tr>
<td>BMI</td>
<td style="text-align:right">IDC_EDIT_BMI</td>
</tr>
</tbody>
</table>
<h3 id="3-实现方法"><a href="#3-实现方法" class="headerlink" title="3.实现方法"></a>3.实现方法</h3><p>双击确认按钮，编辑其点击消息处理函数；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedOk()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	int nHeight= GetDlgItemInt(IDC_EDIT_SG,NULL,TRUE);</div><div class="line">	double dHeight = nHeight / 100.00;</div><div class="line">	int nWeight = GetDlgItemInt(IDC_EDIT_TZ,NULL,TRUE);</div><div class="line">	double bmi = nWeight/(dHeight*dHeight);</div><div class="line">	char buf[28];</div><div class="line">	sprintf(buf, &quot;%.3f&quot;, bmi);</div><div class="line">	SetDlgItemText(IDC_EDIT_BMI,buf);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里可以看见使用到了GetDlgItemInt，这就是直接获取文本框的值，并返回为整形，然后用sprintf(buf, “%.3f”, bmi);将double类型值转换成字符串，并通过SetDlgItemText将字符串的值设置到ID为IDC_EDIT_BMI的文本框上；</p>
<h3 id="4-编译运行"><a href="#4-编译运行" class="headerlink" title="4.编译运行"></a>4.编译运行</h3><p>估计很多人会像我一样，VS2010会报这样的错误：<br><img src="http://img.blog.csdn.net/20171024221112999?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这是因为我们创建的项目的字符集为Unicode，不允许这样转换，这时我们只要将解决方案中右击项目名“day09”-&gt;“属性”-&gt;“配置属性”-&gt;”常规”-&gt;”字符集”-&gt;选择“使用多字节字符集”就好了，如下:<br><img src="http://img.blog.csdn.net/20171024221553536?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171024221603771?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这时就可以通过编译，运行结果如下：<br><img src="http://img.blog.csdn.net/20171024221658382?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="5-其他方法"><a href="#5-其他方法" class="headerlink" title="5.其他方法"></a>5.其他方法</h3><p>再次编辑“确认”按钮的点击消息处理函数；<br><strong>第二种</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedOk()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	TCHAR tcHeight[10], tcWeight[10];</div><div class="line">	GetDlgItem(IDC_EDIT_SG)-&gt;GetWindowText(tcHeight,10);</div><div class="line">	GetDlgItem(IDC_EDIT_TZ)-&gt;GetWindowText(tcWeight,10);</div><div class="line"></div><div class="line">	int nHeight = _ttoi(tcHeight);</div><div class="line">	double dHeight = nHeight / 100.00;</div><div class="line">	int nWeight = _ttoi(tcWeight);</div><div class="line">	</div><div class="line">	double bmi = nWeight/(dHeight * dHeight);</div><div class="line">	char buf[28];</div><div class="line">	sprintf(buf, &quot;%.3f&quot;, bmi);</div><div class="line">	GetDlgItem(IDC_EDIT_BMI)-&gt;SetWindowText(buf);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看见，这里用到了GetDlgItem(IDC_EDIT_SG)-&gt;GetWindowText(tcHeight,10)方法，这个方法的过程就是先通过GetDlgItem(IDC_EDIT_SG)获取到控件对象，然后调用控件的GetWindowText(tcHeight,10)方法来获取控件的显示文本；</p>
<p><strong>第三种</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">void Cday08Dlg::OnBnClickedOk()</div><div class="line">&#123;</div><div class="line">	TCHAR tcHeight[10], tcWeight[10] , tcBMI[10];</div><div class="line">	GetDlgItemText(IDC_EDIT_SG,tcHeight,10);</div><div class="line">	GetDlgItemText(IDC_EDIT_TZ,tcWeight,10);</div><div class="line"></div><div class="line">	int nHeight = _ttoi(tcHeight);</div><div class="line">	double dHeight = nHeight / 100.00;</div><div class="line">	int nWeight = _ttoi(tcWeight);</div><div class="line">	</div><div class="line">	double bmi = nWeight/(dHeight * dHeight);</div><div class="line">	char buf[28];</div><div class="line">	sprintf(buf, &quot;%.3f&quot;, bmi);</div><div class="line">	SetDlgItemText(IDC_EDIT_BMI,buf);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看见，这里直接用到了GetDlgItemText(IDC_EDIT_SG,tcHeight,10)方法，这个方法的过程就是先通过GetDlgItem(IDC_EDIT_SG)获取到控件对象，然后调用控件的GetWindowText(tcHeight,10)方法来设置控件的显示文本；</p>
<p><em>虽然上面三种方法最终结果是一样的，但是其本质还是有所区别的</em></p>
<h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-tags" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/28/第7节-来吧，VS-2010/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿木大叔">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ip.freep.cn/593194/touxiang.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AmuUncle">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/28/第7节-来吧，VS-2010/" itemprop="url">第7节 来吧，VS 2010</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-28T23:32:25+08:00">
                2017-10-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MFC从入门到放弃/" itemprop="url" rel="index">
                    <span itemprop="name">MFC从入门到放弃</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Windows编程基础–第7节-来吧，VS-2010"><a href="#Windows编程基础–第7节-来吧，VS-2010" class="headerlink" title="Windows编程基础–第7节 来吧，VS 2010"></a>Windows编程基础–第7节 来吧，VS 2010</h1><h1 id="VS-2010开发第一步"><a href="#VS-2010开发第一步" class="headerlink" title="VS 2010开发第一步"></a>VS 2010开发第一步</h1><hr>
<p>前面几节我们都是采用<strong>VC++ 6.0 作为IDE（集成开发环境）</strong>，但是由于<strong>VC++ 6.0 </strong>已经过于老旧，目前大多数企业和个人都已经不再使用，而采用vs2005， vs2008， vs2010，vs2015作为MFC程序的开发环境，vs相对vc++6.0具有更友好的界面，及更强大的功能，采用vs开发MFC应用程序更加得心应手。</p>
<h2 id="1、开始使用VS-2010"><a href="#1、开始使用VS-2010" class="headerlink" title="1、开始使用VS 2010"></a>1、开始使用VS 2010</h2><h3 id="1-1-安装VS-2010"><a href="#1-1-安装VS-2010" class="headerlink" title="1.1 安装VS 2010"></a>1.1 安装VS 2010</h3><p><a href="https://jingyan.baidu.com/article/4e5b3e195b838991901e24e5.html" target="_blank" rel="external">参见百度百科</a></p>
<h3 id="1-2-创建一个基于对话框项目"><a href="#1-2-创建一个基于对话框项目" class="headerlink" title="1.2 创建一个基于对话框项目"></a>1.2 创建一个基于对话框项目</h3><p>执行“文件”-&gt;“新建”-&gt;“项目”，选择基于对话框的MFC程序，其他默认就好，基本上和<strong>VC++ 6.0 </strong>创建项目一模一样，如图所示：<br><img src="http://img.blog.csdn.net/20171023201320375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171023201410030?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20171023201434296?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="1-3-创建一个字符统计窗口"><a href="#1-3-创建一个字符统计窗口" class="headerlink" title="1.3 创建一个字符统计窗口"></a>1.3 创建一个字符统计窗口</h3><p>现在我们通过一个小例子来看看VS2010创建MFC程序有什么不同，我们来创建一个字符统计窗口，输入各种字符，最后统计出所有字符个数；<br>设计界面如下，<br><img src="http://img.blog.csdn.net/20171023202332101?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>一个文本输入框，一个“统计”按钮，一个文本显示“字符个数”，直接在工具箱中拖动进来就OK，然后拖动大小适中就好，方法同<strong>VC++ 6.0 </strong>没有区别，可以参考上几节内容。<br><strong>注意:</strong> 若是右边没有工具箱选项卡，可以通过“视图”-&gt;“工具箱”打开。<br>编译运行，效果图：<br><img src="http://img.blog.csdn.net/20171023203106380?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="1-3-创建一个字符统计窗口-1"><a href="#1-3-创建一个字符统计窗口-1" class="headerlink" title="1.3 创建一个字符统计窗口"></a>1.3 创建一个字符统计窗口</h3><p>双击“统计”按钮，编辑按钮的点击处理函数，<br>我们来分析一下：</p>
<blockquote>
<ul>
<li>获取输入框中文本</li>
<li>获取输入框中文本的字符个数</li>
<li>将字符个数显示到静态文本上<br>所以处理函数如下：</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">void Cday07Dlg::OnBnClickedButtonCount()</div><div class="line">&#123;</div><div class="line">	// TODO: 在此添加控件通知处理程序代码</div><div class="line">	CString strInput,strOutput;</div><div class="line">	GetDlgItemText(IDC_EDIT_TEXT,strInput);</div><div class="line"></div><div class="line">	int nCount = strInput.GetLength();</div><div class="line">	strOutput.Format(_T(&quot;字符个数：%d &quot;),nCount);</div><div class="line">	SetDlgItemText(IDC_STATIC_COUNT,strOutput);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="1-4-编译运行"><a href="#1-4-编译运行" class="headerlink" title="1.4 编译运行"></a>1.4 编译运行</h3><p>运行结果图：<br><img src="http://img.blog.csdn.net/20171023204200061?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这是我们发现当我们输入完成是，输入“回车”时，程序就会直接结束，那么我们修改输入框的属性值“Want Return”来允许输入框来接收回车，如图<br><img src="http://img.blog.csdn.net/20171023204439088?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>其实这是我们可以发现现在文本框是只能输入一行，显然不够美观，那么我们再修改一下输入框属性：<br><img src="http://img.blog.csdn.net/20171023205039008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<blockquote>
<ol>
<li>Multiline：允许多行 </li>
<li>Horizontal Scroll：水平滚动条 </li>
<li>Vertical Scroll:垂直滚动条</li>
</ol>
</blockquote>
<p>再次编译运行：<br><img src="http://img.blog.csdn.net/20171023205614359?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>现在文本框现在可以输入多行，并且可以任意回车了。<br>有人可能和我一样，发现程序没有关闭按钮，那是因为我在创建的时候取消了系统菜单，我们可以选定对话框主界面，选择属性-&gt;system menu-&gt;TRUE:<br><img src="http://img.blog.csdn.net/20171023205947196?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>这是关闭按钮就出现了，可以正常关闭了。</p>
<h2 id="2、初探VS中消息映射机制"><a href="#2、初探VS中消息映射机制" class="headerlink" title="2、初探VS中消息映射机制"></a>2、初探VS中消息映射机制</h2><h3 id="2-1-创建EDIT的消息处理函数"><a href="#2-1-创建EDIT的消息处理函数" class="headerlink" title="2.1 创建EDIT的消息处理函数"></a>2.1 创建EDIT的消息处理函数</h3><p>单击选定输入框，右击选择“添加事件处理程序”，这是可以很直观的看见EDIT的消息列表和要添加到的类，以及添加的处理函数名，现在我们来添加一个EN_CHANGE的消息处理函数，如图所示：<br><img src="http://img.blog.csdn.net/20171023212741178?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>单击“添加编辑”来编辑消息处理函数，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">void Cday07Dlg::OnEnChangeEditText()</div><div class="line">&#123;</div><div class="line">	// TODO:  如果该控件是 RICHEDIT 控件，它将不</div><div class="line">	// 发送此通知，除非重写 CDialogEx::OnInitDialog()</div><div class="line">	// 函数并调用 CRichEditCtrl().SetEventMask()，</div><div class="line">	// 同时将 ENM_CHANGE 标志“或”运算到掩码中。</div><div class="line"></div><div class="line">	// TODO:  在此添加控件通知处理程序代码</div><div class="line">	CString strInput,strOutput;</div><div class="line">	GetDlgItemText(IDC_EDIT_TEXT,strInput);</div><div class="line"></div><div class="line">	int nCount = strInput.GetLength();</div><div class="line">	strOutput.Format(_T(&quot;字符个数：%d &quot;),nCount);</div><div class="line">	SetDlgItemText(IDC_STATIC_COUNT,strOutput);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-2-编译运行"><a href="#2-2-编译运行" class="headerlink" title="2.2 编译运行"></a>2.2 编译运行</h3><p>这是我们可以发现我们在输入框中输入字符时，下方的字符统计数会实时显示，这就是输入文本时，EDIT的EN_CHANGE消息被触发，从而触发其消息处理函数OnEnChangeEditText，导致字符统计数实时更新，效果图如下：<br><img src="http://img.blog.csdn.net/20171023213131534?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU1NDkzMDk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="2-3-MFC消息映射机制流程"><a href="#2-3-MFC消息映射机制流程" class="headerlink" title="2.3 MFC消息映射机制流程"></a>2.3 MFC消息映射机制流程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">st=&gt;start: Start</div><div class="line">op=&gt;operation: 输入框文本变化</div><div class="line">op2=&gt;operation: 触发EN_CHANGE消息</div><div class="line">op3=&gt;operation: 调用EN_CHANGE的处理函数OnEnChangeEditText</div><div class="line">op4=&gt;operation: 将输入框字符数返回到界面</div><div class="line">e=&gt;end</div><div class="line"></div><div class="line">st-&gt;op-&gt;op2-&gt;op3-&gt;op4-&gt;e</div></pre></td></tr></table></figure>
<h3 id="项目源码可以访问我的码云"><a href="#项目源码可以访问我的码云" class="headerlink" title="项目源码可以访问我的码云"></a><a href="https://gitee.com/AmuUncle/MFC_CSDN.git" target="_blank" rel="external">项目源码可以访问我的码云</a></h3>
          
        
      
    </div>
    
    
    
	
	
    

    

    
	

	
	<div>
		
	</div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://ip.freep.cn/593194/touxiang.jpg"
                alt="阿木大叔" />
            
              <p class="site-author-name" itemprop="name">阿木大叔</p>
              <p class="site-description motion-element" itemprop="description">我的梦想就是努力实现小时候吹过的牛！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://gitee.com/AmuUncle" target="_blank" title="码云">
                    
                      <i class="fa fa-fw fa-github"></i>码云</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:AmuUncle@163.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.csdn.net/qq_25549309" title="CSDN" target="_blank">CSDN</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; 阿木大叔 &mdash; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">2017-2020 AmuUncle.site</span>

  
</div>







<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>



        


<script>
  	var _mtac = {};
  	(function() {
  		var mta = document.createElement("script");
  		mta.src = "https://pingjs.qq.com/h5/stats.js?v2.0.4";
  		mta.setAttribute("name", "MTAH5");
  		mta.setAttribute("sid", "63993238");

  		var s = document.getElementsByTagName("script")[0];
  		s.parentNode.insertBefore(mta, s);
  	})();
</script>






        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  

  

  

  
  
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>

<script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
